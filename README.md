# Карта кинотеатра #

### Описание ###

Приложение позволяющее создавать карты кинотеатра с возможностью резервирования мест.
Зал состоит из рядов, ряд состоит из мест. Каждый сеанс ассоциированы с залом. Каждая операция ассоциирована с местом, пользователем и сеансом. Под операцией подразумевается операции бронирования и снятия брони.
Используемый стэк технологий:

 - Java
 - Spring MVC
 - Spring Security
 - Hibernate
 - PostgreSQL
 - JavaScript
 - AngularJS
 - Bootstrap

### Развертывание приложения ###

Тестовые данные находится в файле:

    other/test-data.sql

Настройки для доступа к БД находятся в файле:

    src/main/resources/datasource.properties

Необходимо установить зависимости для frontend части с помощью пакетного менеджера bower:

    bower install

Установка сборка Maven'ом и запуск сервера Tomcat:

    mvn clean install tomcat7:run-war

После запуска, приложение доступно по адресу:

    http://localhost:8080/

Доступные пользователи:

    пользователь: user1
    пароль: user1

    пользователь: user2
    пароль: user2

### REST API ###

REST API разделены на 6 сервисов.

#### Сервис для работы с залами ####

Тип запроса               | Url              		     | Описание
--------------------------|--------------------------|--------------------------
GET                       | /api/v1/halls            | Получение списка залов
GET                       | /api/v1/halls/{id}       | Получение одного зала
PUT                       | /api/v1/halls            | Обновление зала
POST                      | /api/v1/halls            | Создание зала
DELETE                    | /api/v1/halls            | Удаление зала

#### Сервис для работы с рядами ####

Тип запроса               | Url              		     | Описание
--------------------------|--------------------------|--------------------------
GET                       | /api/v1/rows/{id}        | Получение одного ряда
PUT                       | /api/v1/rows             | Обновление ряда
DELETE                    | /api/v1/rows             | Удаление ряда
GET                       | /api/v1/halls/{id}/rows  | Получение списка рядов относящихся к залу
POST                      | /api/v1/halls/{id}/rows  | Добавление ряда в зал
GET                       | /api/v1/sessions/{id}/rows| Получение списка рядов относящихся к сеансу

#### Сервис для работы с операциями ####

Тип запроса               | Url              		     | Описание
--------------------------|--------------------------|--------------------------
GET                       | /api/v1/sessions/{id}/operations| Получение операций относящихся к сеансу
POST                      | /api/v1/sessions/{sessionId}/operations| Добавление списка операций относящихся к сеансу

#### Сервис для работы с сеансами ####

Тип запроса               | Url              		     | Описание
--------------------------|--------------------------|--------------------------
GET                       | /api/v1/sessions         | Получение списка сеансов
GET                       | /api/v1/sessions/{id}    | Получение одного сеанса
DELETE                    | /api/v1/sessions         | Удаление сеанса
POST                      | /api/v1/halls/{id}/sessions| Добавление сеанса
PUT                       | /api/v1/halls/{id}/sessions| Обновление сеанса

#### Сервис для работы с местами ####

Тип запроса               | Url              		     | Описание
--------------------------|--------------------------|--------------------------
GET                       | /api/v1/rows/{id}/seats  | Получение списка мест относящихся к ряду
POST                      | /api/v1/rows/{id}/seats  | Добавление списка мест в ряд

#### Сервис для работы с пользователями ####

Тип запроса               | Url              		     | Описание
--------------------------|--------------------------|--------------------------
POST                      | /user                    | Создание пользователя
GET                       | /user/{username}         | Получение пользователя по логину
POST                      | /currentUser             | Получение текущего пользователя
POST                      | /authenticate            | Аутентификация пользователя
POST                      | /logout                  | Завершение сеанса пользователя
